cabs:
  skysim:
    info: Create empty MS using simms
    command: simms skysim

    inputs:
      ms:
        info: Measurement set
        dtype: MS
        required: yes
        must_exist: yes
        policies:
          positional: true
      ascii-sky: 
        info: Catalogue of sources. A full description of accepted units can be found in the documentation.
        dtype: File
        required: no
        abbreviation: as
      fits-sky:
        info: FITS file(s) containing the sky model
        dtype: Union[File, List[File]]
        required: no
        abbreviation: fs
      fits-sky-interp:
        info: Interpolation method when MS and FITS image grids do not match. Interpolation is only done within the overlap region. 
        dtype: str
        default: nearest
        choices:
        - nearest
        - linear
        - cubic
        abbreviation: fsi
      polarisation:
        info: Simulate all available stokes parameters (correlations). If false, only consider stokes I.
        default: true
        dtype:  bool
        abbreviation: pol
      pol-basis:
        info: Polarization basis for the simulation. The default is circular polarization.
        dtype: str
        default: linear
        choices: ['linear', 'circular']
      pixel-tol:
        info: Minimum brightness for a pixel to be considered in direct Fourier transform
        dtype: float
        required: no
        default: 1e-7
        abbreviation: pt
      fft-precision:
        info: Precision of the FFT calculation. The default is double precision.
        dtype: str
        default: double
        choices: ['single', 'double']
      do-wstacking:
        info: Whether to use w-stacking for FFT-based visibility prediction.
        dtype: bool
        default: true
      cat-delim: 
        info: Delimeter that is used in the ascii-sky 
        dtype: str
        abbreviation: cd
      column:
        info: Data column for simulation
        dtype: str
        default: DATA
        abbreviation: col
      nworkers:
        info: Number of workers (one per CPU)
        dtype: int
        default: 4
      row-chunks:
        info: Chunking strategy for the simulation
        dtype: int
        default: 10000
        abbreviation: rcs
      field-id:
        info: Field ID
        dtype: int
        default: 0
        abbreviation: fi
      spw-id:
        info: Spectral Window ID
        dtype: int
        default: 0
      sefd:
        info: Add noise using this SEFD value
        dtype: float
      cat-species:
        info: Type of catalogue e.g. PyBDSF
        dtype: str
        abbreviation: cs
        choices: ['bdsf_gaul', 'aegean']
      input-column:
        info: Input column (see option --mode)
        dtype: str
        abbreviation: ic
      mode:
        info: Simulation mode. To create a new column use "sim"; to add to column use "add"; to subtract from column use "subtract".
        dtype: str
        default: sim
        choices: ['sim', 'add', 'subtract']
      die:
        info: "#### NOT IMPLEMENTED #### Direction independent effects"
        dtype: File
        required: no
      dde:
        info: "#### NOT IMPLEMENTED ### Direction dependent effects"
        dtype: File
        required: no
      mapping:
        info: File that specifies the names of columns that are expected vs. the names of the columns given in the catalogue
        dtype: File
        required: no
      outputs:
        {}

  telsim:
    info: Create empty MS using simms
    command: simms telsim
    inputs:
      ms:
        info: Observation name/id/label
        dtype: MS
        must_exist: no
        required: yes
        policies:
          positional: true
      telescope:
        info: Name of telescope you are simulating
        dtype: str
        required: yes
        abbreviation: tel
      subarray_list: 
        info: Custom list of antennas to use, e.g., M000,M005,SKA009. If specified, this must be a subarray of the given telescope.
        dtype: List[str]
        required: no
        abbreviation: sublist
      subarray_range:
        info: Custom range of antennas indices to use, e.g. start,end,step where step is optional. If specified, this must be a subarray of the given telescope.
        dtype: List[int]
        required: no
        abbreviation: subrange
      subarray_file:
        info: File with list of custom antennas to use, e.g., /path/to/subarray.yaml. File should contain antnames key, e.g., [M000,M005,SKA009]. This must be a subarray of the given telescope.
        dtype: File
        required: no
        abbreviation: subfile
      direction:
        info: Direction of field centre for MS. Example, J2000,0h24m20s,-30d12m33s or J2000,0:24:20,-30:12:33. Default is J2000,1h0m0s,-31d0m0s.
        dtype: str
        metavar: '[EPOCH,]RA,Dec'
        default: 'J2000,1h0m0s,-31d0m0s'
        abbreviation: dir
      starttime: 
        info: Observation start time in UTC. For example, '2024-03-14T06:15:10'. Default is the current machine time.
        metavar: 'YYYY-MM-DDTHH:MM:SS'
        dtype: str
        abbreviation: st
      startha:
        info: Hour angle at start of observation. Can be used instead of date.
        dtype: float
        abbreviation: sha
      dtime:
        info: Integration/exposure time in seconds. Default is 8 seconds.
        dtype: float
        default: 8
        abbreviation: dt
      ntimes:
        info: Number of times slots for MS. Default is 10.
        dtype: int
        default: 10
        abbreviation: nt
      startfreq:
        info: Centre of first frequency channel/bin, e.g 0.55GHz. If given without units, Hertz are assumed. Default is 1420MHz.
        dtype: Union[str, float]
        default: 1420MHz
        abbreviation: sf
      dfreq:
        info: Channel width and units, e.g 2.4MHz. If given without units, Hertz are assumed. Default is 1MHz.
        dtype: Union[str, float]
        default: 1MHz
        abbreviation: df
      nchan:
        info: Number of frequency channels. Default is 9.
        dtype: int
        default: 9
        abbreviation: nc
      freq_range:
        info: A list containing the start frequency, end frequency, and number of channels, e.g., startfreq,endfreq,nchan.
        dtype: str
        abbreviation: fr
      correlations:
        info: Feed correlations for MS, e.g., 'XX,YY'. Default is 'XX,YY'.
        dtype: str
        default: XX,YY
        abbreviation: corr
      nworkers:
        info: Number of workers (one per CPU). Default is 4.###Not IMPLEMENTED###
        dtype: int
        default: 4
      rowchunks:
        info: Number of chunks to divide the data into, larger number of chunks improves the computation speed. Default is 50000.
        dtype: int
        default: 50000
        abbreviation: rc
      column:
        info: The column in which to corrupt the visibilities with noise. Default is MODEL_DATA column.
        dtype: str
        default: 'MODEL_DATA'
        abbreviation: col
      sefd:
        info: Antenna SEFD (one value for all frequencies)
        dtype: float
      tsys_over_eta:
        info: Antenna system temperature over aperture efficiency (one value for all frequecies) 
        dtype: float
        abbreviation: tos
      sensitivity_file: 
        info: File with antenna spectral sensivity information. Allowed keys (column names) are 'freq, tsys, sefd, tsys_over_eta'.
        dtype: File 
        abbreviation: sfile
      low_elevation_limit:
        info: Minimum source elevation in degrees that is considered reliable data. The data recorded when the source is below this value is flagged.
        dtype: float
        abbreviation: lel
      high_elevation_limit:
        info: Maximum source elevation in degrees that is considered reliable data. The data recorded when the source is above this value is flagged.
        dtype: float
        abbreviation: hel
      smooth: 
        info: If you have provided a sensitivity file with frequencies and their corresponding SEFD or tsys_over_eta, then we will fit to get the approximate SEFD matching the MS frequencies. There are two fitting options, polyn and spline.
        dtype: str
      fit_order:
        info: The fitting order to use when approximating the MS frequencies SEFDs. 
        dtype: int
        abbreviation: fo
        