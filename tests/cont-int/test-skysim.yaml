_include:
- (simms.parser_config)simms-cabs.yaml

opts:
  backend:
    select: native

recipe:
  inputs:
    ms:
      dtype: MS
      default: testms.ms
    skymodel:
      dtype: File
      default: ../testsky.txt
  steps:
    printhelp:
      cab:
        command: simms skysim --help
    basic:
      cab: simms skysim
      params:
        ms: =recipe.ms
        catalogue: =recipe.skymodel
        column: DATA
    withnoise:
      cab: simms skysim
      params:
        ms: =recipe.ms
        catalogue: =recipe.skymodel
        column: NOISY_DATA
        sefd: 512
    subtract:
      cab: simms skysim
      params:
        _use: recipe.steps.basic.params
        mode: subtract
        input-column: DATA
        simulated-column: NOISY_DATA
        column: DENOISED_DATA
    
